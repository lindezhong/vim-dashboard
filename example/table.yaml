# 表格图表样例配置
# 功能说明：展示一个简单的数据表格，显示当前时间、随机数据和计算结果
# 适用场景：数据监控、状态展示、简单报表等

# 数据库配置
database:
  # 数据库类型，这里使用SQLite作为示例
  type: sqlite
  # 数据库连接URL，使用内存数据库，无需创建文件
  url: "sqlite:///:memory:"

# 查询配置
query:
  # SQL查询语句，生成模拟数据，无需依赖任何表
  sql: |
    SELECT 
      datetime('now', 'localtime') as current_time,     -- 当前本地时间
      abs(random() % 100) as random_number,             -- 0-99的随机数
      abs(random() % 1000) as sales_amount,             -- 模拟销售金额
      case 
        when abs(random() % 3) = 0 then 'Active'
        when abs(random() % 3) = 1 then 'Pending' 
        else 'Inactive'
      end as status,                                     -- 随机状态
      'User' || (abs(random() % 10) + 1) as username,    -- 模拟用户名
      "{{key1}}" as k1,
      "{{key2}}" as k2

  args:
    - key: key1
      default: value1
    - key: key2
      default: value2

# 显示配置
show:
  type: table                     # 图表类型：表格
  title: "系统状态监控表"         # 表格标题
  interval: 30s                   # 每30秒刷新一次数据

  # 列配置，定义每列的显示名称和格式
  column_list:
    - column: current_time        # 数据库列名
      alias: "当前时间"           # 显示名称
      width: 20                   # 列宽度（字符数）
      align: center               # 对齐方式：left, center, right

    - column: random_number
      alias: "随机数"
      width: 10
      align: right
      format: "{:>3d}"            # 数字格式化：右对齐，3位数字

    - column: sales_amount
      alias: "销售金额"
      width: 12
      align: right
      format: "¥{:,}"             # 货币格式：添加千位分隔符

    - column: status
      alias: "状态"
      width: 10
      align: center
      # 状态颜色配置
      color_map:
        Active: green             # Active状态显示绿色
        Pending: yellow           # Pending状态显示黄色
        Inactive: red             # Inactive状态显示红色

    - column: username
      alias: "用户名"
      width: 12
      align: left

    - column: key1
      alias: "k1"
      width: 10
      align: center

    - column: key2
      alias: "k2"
      width: 10
      align: center

  # 表格样式配置
  style:
    border: true                  # 是否显示边框
    header_style: bold blue       # 表头样式：粗体蓝色
    row_styles:                   # 行样式配置
      - ""                        # 奇数行默认样式
      - "dim"                     # 偶数行暗色样式（斑马纹效果）
    
  # 排序配置
  sort:
    column: sales_amount          # 按销售金额排序
    order: desc                   # 降序排列：desc（降序）或 asc（升序）
    
  # 分页配置
  pagination:
    enabled: false                # 是否启用分页
    page_size: 10                 # 每页显示行数
    
  # 倒计时显示配置
  show_countdown: true            # 是否显示倒计时
  countdown_format: "下次更新: {time}s"  # 倒计时显示格式